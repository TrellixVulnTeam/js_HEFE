<div id = "map" style = "width:1000px; height:480px"></div>
<link rel = "stylesheet" href = "http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
<script src = "http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/gh/rmguy/js@master/countries_weapons.js"></script>
<style>
.legend { text-align: left; line-height: 18px; color: #555; } .legend i { width: 18px; height: 18px; float: left; margin-right: 8px; opacity: 0.5; }
</style>
<style>
.leaflet-control-layers-expanded {
  color: white;
  background-color: transparent;
}
</style>
<script>		
	// Creating a map object
	// This is a leaflet api call. Arg 1 is the div id above.  
    var layer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}.png', {
		subdomains: 'abcd',
		maxZoom: 19
	});
	
	// Creating map options
	var mapOptions = {
		// Lat/long
		center: [41, 12],
		// zoom level of map
        zoom: 2,
		attributionControl: false,
		layers: [layer]
	}
    var map = new L.map('map', mapOptions);
    
    // Coloring countries
	function getColor(d) {
    	return d > 10000 ? '#045a8d' :
           d > 5000  ? '#2b8cbe' :
           d > 999  ? '#74a9cf' :
           d > 500  ? '#a6bddb' :
           d > 100   ? '#d0d1e6' :
           				'#f1eef6';
	}
	function style(feature) {
		return {
			fillColor: getColor(feature.properties.net),
			weight: 2,
			opacity: 0,
			// color: 'white',
			// dashArray: '3',
			fillOpacity: 0.3
		};
	}

	L.geoJson(countriesData, {style: style}).addTo(map)

    // Legend creation
	var legend = L.control({position: 'bottomright'});

	legend.onAdd = function (map) {
		var div = L.DomUtil.create('div', 'info legend'),
			grades = [0, 10, 100, 500, 999, 5000, 10000],
			labels = [];

			// loop through our density intervals and generate a label with a colored square for each interval
		for (var i = 0; i < grades.length; i++) {
			div.innerHTML +=
				'<i style="background:' + getColor(grades[i] + 1) + '"></i><span style="color: white">' +
				grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '</span><br>' : '+');
		}
		return div;
	};

	legend.addTo(map);

    // Creating Layers for markers
	var air_brazil_marker = L.marker([-14.2350, -51.9253])
	var air_brazil = air_brazil_marker.bindPopup('ERJ-145(3).');
	air_brazil_marker.on('mouseover', function (e) {
		this.openPopup();
	});
	air_brazil_marker.on('mouseout', function (e) {
		this.closePopup();
	});

	var air_canada_marker = L.marker([56.1304, -106.3468])
	var air_canada = air_canada_marker.bindPopup('PT6(85), PW100(112).');
	air_canada_marker.on('mouseover', function (e) {
		this.openPopup();
	});
	air_canada_marker.on('mouseout', function (e) {
		this.closePopup();
	});

	var air_france_marker = L.marker([46.2276, 2.2137])
	var air_france = air_france_marker.bindPopup('Mirage-2000-5(49), Rafale(36)');
	air_france_marker.on('mouseover', function (e) {
		this.openPopup();
	});
	air_france_marker.on('mouseout', function (e) {
		this.closePopup();
	});

	var air_germany_marker = L.marker([51.165, 10.4515])
	var air_germany = air_germany_marker.bindPopup('Do-228MP(52)');
	air_germany_marker.on('mouseover', function (e) {
		this.openPopup();
	});
	air_germany_marker.on('mouseout', function (e) {
		this.closePopup();
	});


	var air_russia_marker = L.marker([61.5240, 105.3188])
	var air_russia = air_russia_marker.bindPopup('Su-30MK(182), Mig-29SMT/Fulcrum-F(92), A-50EhI');
	air_russia_marker.on('mouseover', function (e) {
		this.openPopup();
	});
	air_russia_marker.on('mouseout', function (e) {
		this.closePopup();
	});


	var air_spain_marker = L.marker([40.4637, -3.7492])
	var air_spain = air_spain_marker.bindPopup('C-295(56)'); 
	air_spain_marker.on('mouseover', function (e) {
		this.openPopup();
	});
	air_spain_marker.on('mouseout', function (e) {
		this.closePopup();
	});

	var air_switzerland_marker = L.marker([46.8182, 8.2275])
	var air_switzerland = air_switzerland_marker.bindPopup('PC-7 Turbo Trainer (75');
	air_switzerland_marker.on('mouseover', function (e) {
		this.openPopup();
	});
	air_switzerland_marker.on('mouseout', function (e) {
		this.closePopup();
	});

	var air_us_marker = L.marker([37.0902, -95.7129])
	var air_us = air_us_marker.bindPopup('P-8A Poseidon(12), C-130J-30 Hercules(7)');
	air_us_marker.on('mouseover', function (e) {
		this.openPopup();
	});
	air_us_marker.on('mouseout', function (e) {
		this.closePopup();
	});

	var air_countries = L.layerGroup([air_brazil, air_canada, air_france, air_germany, air_russia, air_spain, air_switzerland, air_us]);


	var missile_france = L.marker([46.2276, 2.2137]).bindPopup('Military aircraft.');
	var missile_countries = L.layerGroup([missile_france]);

	var baseMap = {
			"Defense FDI (in m$)": layer
	}

	var overlayMap = {
		"Fighter suppliers": air_countries,
		"Missile suppliers": missile_countries
	}

	L.control.layers(baseMap, overlayMap, {collapsed: false}).addTo(map);

	// <script src="https://cdn.jsdelivr.net/gh/rmguy/js/countries_weapons.js"></script>
	// <script src="countries_weapons.js"></script>
</script>




